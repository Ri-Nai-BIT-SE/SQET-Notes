# 判定表法（Decision Table）

### 适用场景

适用于处理**复杂逻辑关系**的情况，特别是多个逻辑条件取值的组合构成的复杂情况。

### 什么是条件？什么是动作？

**简单理解**：
- **条件（Condition）** = **输入/判断** = 程序需要检查的问题
  - 例如："功率大于50马力吗？"、"维修记录不全吗？"
  - 条件通常是一个**判断问题**，答案是"是"或"否"
  
- **动作（Action）** = **输出/结果** = 程序应该执行的操作
  - 例如："进行优先处理"、"作其他处理"
  - 动作是程序**应该做什么**

**记忆方法**：
- **条件**：程序在"问问题"（输入判断）
- **动作**：程序在"做决定"（输出结果）

### 判定表的组成部分

1. **条件桩（Condition Stub）**：列出所有需要判断的条件（问题）
2. **动作桩（Action Stub）**：列出所有可能的操作（结果）
3. **条件项（Condition Entry）**：每个条件在不同规则下的取值（Y/N 或 1/0）
4. **动作项（Action Entry）**：每个动作在不同规则下是否执行（√ 或 ×）

### 判定表结构（标准格式）

**格式说明**：条件用 Y/N（是/否）或 1/0（真/假），动作用 √（执行）或空白（不执行）

| 条件桩 | 规则1 | 规则2 | 规则3 | 规则4 | ... |
|--------|-------|-------|-------|-------|-----|
| 条件1  | Y     | Y     | N     | N     | ... |
| 条件2  | Y     | N     | Y     | N     | ... |
| 条件3  | Y     | N     | N     | Y     | ... |
| **动作桩** |       |       |       |       |     |
| 动作1  | √     |       |       |       | ... |
| 动作2  |       | √     | √     |       | ... |
| 动作3  |       |       |       | √     | ... |

**说明**：
- **条件项**：用 `Y` 表示是（Yes/True），`N` 表示否（No/False），也可以用 `1`/`0`
- **动作项**：用 `√` 表示执行该动作，**空白**表示不执行
- **规则**：每一列代表一个规则（一种条件组合），对应一个测试用例

### 完整实例：设备处理判定表（PPT示例）

**题目**：根据设备情况决定处理方式
- 如果功率大于50马力，且维修记录不全，或运行超过10年，则进行优先处理
- 否则，作其他处理

#### 第一步：识别条件和动作

**条件（Condition）** - 程序需要判断的问题：
- C1: 功率大于50马力吗？
- C2: 维修记录不全吗？
- C3: 运行超过10年吗？

**动作（Action）** - 程序应该执行的操作：
- A1: 进行优先处理
- A2: 作其他处理

#### 第二步：计算规则数

- 3个条件，每个条件2个取值（Y/N）→ 2³ = **8 种规则**

#### 第三步：填入条件项（所有可能的组合）

| 条件桩 | 规则1 | 规则2 | 规则3 | 规则4 | 规则5 | 规则6 | 规则7 | 规则8 |
|--------|-------|-------|-------|-------|-------|-------|-------|-------|
| C1: 功率>50马力? | Y | Y | Y | Y | N | N | N | N |
| C2: 维修记录不全? | Y | Y | N | N | Y | Y | N | N |
| C3: 运行>10年? | Y | N | Y | N | Y | N | Y | N |
| **动作桩** | | | | | | | | |
| A1: 进行优先处理 | | | | | | | | |
| A2: 作其他处理 | | | | | | | | |

**说明**：条件项按照二进制顺序排列（YYY, YYN, YNY, YNN, NYY, NYN, NNY, NNN）

#### 第四步：填入动作项（根据业务逻辑）

**业务逻辑分析**：
- 规则1：功率>50 **且** 维修记录不全 **且** 运行>10年 → 优先处理
- 规则2：功率>50 **且** 维修记录不全 **且** 运行≤10年 → 优先处理
- 规则3：功率>50 **且** 维修记录全 **且** 运行>10年 → 优先处理
- 规则4：功率>50 **且** 维修记录全 **且** 运行≤10年 → 其他处理
- 规则5：功率≤50 **且** 维修记录不全 **且** 运行>10年 → 优先处理
- 规则6：功率≤50 **且** 维修记录不全 **且** 运行≤10年 → 其他处理
- 规则7：功率≤50 **且** 维修记录全 **且** 运行>10年 → 优先处理
- 规则8：功率≤50 **且** 维修记录全 **且** 运行≤10年 → 其他处理

**填入后的判定表**：

| 条件桩 | 规则1 | 规则2 | 规则3 | 规则4 | 规则5 | 规则6 | 规则7 | 规则8 |
|--------|-------|-------|-------|-------|-------|-------|-------|-------|
| C1: 功率>50马力? | Y | Y | Y | Y | N | N | N | N |
| C2: 维修记录不全? | Y | Y | N | N | Y | Y | N | N |
| C3: 运行>10年? | Y | N | Y | N | Y | N | Y | N |
| **动作桩** | | | | | | | | |
| A1: 进行优先处理 | √ | √ | √ | | √ | | √ | |
| A2: 作其他处理 | | | | √ | | √ | | √ |

#### 第五步：简化判定表

**简化规则**：如果两个规则的动作相同，且只有一个条件不同，可以合并。

**可以合并的规则**：
- 规则1和规则2：都是"优先处理"，只有C3不同 → 可以合并，C3用"—"表示
- 规则5和规则7：都是"优先处理"，只有C2不同 → 可以合并，C2用"—"表示
- 规则6和规则8：都是"其他处理"，只有C2不同 → 可以合并，C2用"—"表示

**简化后的判定表**：

| 条件桩 | 规则1/2<br>(合并) | 规则3 | 规则4 | 规则5/7<br>(合并) | 规则6/8<br>(合并) |
|--------|-----------------|-------|-------|-----------------|----------------|
| C1: 功率>50马力? | Y | Y | Y | N | N |
| C2: 维修记录不全? | Y | N | N | — | — |
| C3: 运行>10年? | — | Y | N | Y | N |
| **动作桩** | | | | | |
| A1: 进行优先处理 | √ | √ | | √ | |
| A2: 作其他处理 | | | √ | | √ |

**说明**：
- `—` 表示该条件在这个规则中**无关**（无论Y还是N，结果都一样）
- 简化后从8个规则减少到5个规则，但测试用例数不变（每个规则对应一个用例）

### 建立判定表的一般步骤

1. **确定规则个数**：
   - n个条件，每个条件2个取值（Y/N），共有 **2^n** 种规则
   - 例如：3个条件 → 2³ = 8 种规则

2. **列出条件桩和动作桩**：
   - 条件桩：列出所有需要判断的问题
   - 动作桩：列出所有可能的操作

3. **填入条件项**：
   - 按照二进制顺序（YYY, YYN, YNY, ...）填入所有可能的条件组合
   - 用 `Y` 表示是，`N` 表示否

4. **填入动作项**：
   - 根据业务逻辑，确定每种条件组合下应该执行哪些动作
   - 用 `√` 表示执行该动作，空白表示不执行

5. **简化判定表**（可选但重要）：
   - **合并规则**：如果有两个规则，动作相同，且只有一个条件不同，则可以合并
   - 合并后，该条件用 **"—"** 表示无关（don't care）
   - **注意**：简化后的判定表更简洁，但测试用例数不变

### 经典实例：三角形问题的判定表

**题目**：输入三个整数 a, b, c，判断三角形类型。

#### 第一步：识别条件和动作

**条件（Condition）**：
- C1: a = b?
- C2: a = c?
- C3: b = c?
- C4: a + b > c? （构成三角形的条件1）
- C5: a + c > b? （构成三角形的条件2）
- C6: b + c > a? （构成三角形的条件3）

**动作（Action）**：
- A1: 等边三角形
- A2: 等腰三角形
- A3: 一般三角形
- A4: 非三角形
- A5: 不可能（逻辑悖论）

#### 第二步：计算规则数

- 6个条件，每个条件2个取值（是/否）→ 2⁶ = **64 种规则**（理论上）

#### 第三步：构建判定表（简化示例）

**注意**：完整判定表有64列，这里只展示部分关键规则作为示例。

| 条件桩 | 规则1<br>(等边) | 规则2<br>(等腰) | 规则3<br>(一般) | 规则4<br>(非三角形) | 规则5<br>(不可能) |
|--------|----------------|----------------|----------------|-------------------|-----------------|
| C1: a=b? | Y | Y | N | N | Y |
| C2: a=c? | Y | N | N | N | N |
| C3: b=c? | Y | Y | N | N | Y |
| C4: a+b>c? | Y | Y | Y | N | Y |
| C5: a+c>b? | Y | Y | Y | N | Y |
| C6: b+c>a? | Y | Y | Y | N | Y |
| **动作桩** | | | | | |
| A1: 等边三角形 | √ | | | | |
| A2: 等腰三角形 | | √ | | | |
| A3: 一般三角形 | | | √ | | |
| A4: 非三角形 | | | | √ | |
| A5: 不可能 | | | | | √ |

**规则说明**：
- **规则1**：a=b=Y, a=c=Y, b=c=Y, 且满足三角形条件 → 等边三角形
- **规则2**：a=b=Y, b=c=Y, 但 a≠c=N, 且满足三角形条件 → 等腰三角形（注意：这里a=b且b=c，但a≠c是逻辑矛盾，实际应排除）
- **规则3**：a≠b, a≠c, b≠c, 且满足三角形条件 → 一般三角形
- **规则4**：不满足三角形条件（a+b≤c等） → 非三角形
- **规则5**：逻辑悖论（如a=b且b=c但a≠c） → 不可能，不能作为测试用例

#### 第四步：简化判定表

**简化规则**：如果两个规则的动作相同，且只有一个条件不同，可以合并。

**示例**：假设规则X和规则Y都是"一般三角形"，只有C1不同（X中C1=1，Y中C1=0），其他条件都相同，则可以合并：

| 条件桩 | 规则X/Y（合并后） |
|--------|-----------------|
| C1: a=b? | — （无关） |
| C2: a=c? | 0 |
| C3: b=c? | 0 |
| ... | ... |
| **动作桩** | |
| A3: 一般三角形 | × |

**注意**：
1. 有些规则是"不可能"的（逻辑悖论），这些规则不能作为测试用例
2. 简化后的判定表更简洁，但测试用例数不变（每个规则对应一个用例）
3. 实际考试中，判定表可能已经简化好，你需要能看懂并填写空缺部分

---
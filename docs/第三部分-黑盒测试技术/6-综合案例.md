# 综合案例演示

**题目**：某程序输入三个整数 a, b, c，分别代表三角形的三条边。程序判断并输出：一般三角形、等腰三角形、等边三角形、非三角形。请用**等价类划分法**设计测试用例。

**满分答题思路：**

### 1. 列出等价类表

| 输入条件 | 有效等价类 (编号) | 无效等价类 (编号) |
| :--- | :--- | :--- |
| **边长数值** | 整数 (1) | 非整数 (2) |
| | > 0 (3) | <= 0 (4) |
| **构成三角形** | a+b>c, a+c>b, b+c>a (5) | 两边之和 <= 第三边 (6) |
| **特殊形状** | a=b!=c 或 a=c!=b 或 b=c!=a (7 等腰) | |
| | a=b=c (8 等边) | |

*(注：实际考试分得可能更细，比如把构成三角形的规则拆成三条)*

### 2. 设计测试用例（根据编号）

**Step 1: 覆盖有效类 (尽可能多)**

*   用例1: 输入 `3, 4, 5` -> 预期输出: 一般三角形。 (覆盖: 1, 3, 5)
*   用例2: 输入 `3, 3, 4` -> 预期输出: 等腰三角形。 (覆盖: 1, 3, 5, 7)
*   用例3: 输入 `3, 3, 3` -> 预期输出: 等边三角形。 (覆盖: 1, 3, 5, 8)

**Step 2: 覆盖无效类 (一次一个)**

*   用例4: 输入 `2.5, 3, 4` -> 预期输出: 输入错误。 (覆盖: 2)
*   用例5: 输入 `-1, 2, 3` -> 预期输出: 输入错误。 (覆盖: 4)
*   用例6: 输入 `1, 2, 3` -> 预期输出: 非三角形。 (覆盖: 6) *注: 1+2=3，不满足两边之和大于第三边*

**总结**：黑盒测试这道大题，只要你把**表格画出来**，并且**用例编号对应清楚**，大概率能拿满分。

---

## 📚 经典例题详解

### 例题1：三角形问题（Triangle Problem）- 必考经典题

**题目描述**：程序接受三个整数 A、B、C 作为输入，这三个整数代表三角形的三条边。程序判断并输出：一般三角形、等腰三角形、等边三角形、非三角形。

**老师强调的要点**：

1. **隐含条件（必须考虑）**：
   - **明示需求**：三个整数，代表三角形的三条边
   - **隐含需求**：
     - A、B、C 必须 > 0（正整数）
     - 必须满足三角形构成条件：A+B>C, A+C>B, B+C>A

2. **等价类划分视角**：
   - 可以从**输入域**角度划分（整数范围、是否为正数）
   - 可以从**输出域**角度划分（三角形类型）
   - **测试用例设计是一种艺术**，没有标准答案，取决于你的视角

3. **边界值分析**：
   - 如果题目给出范围（如 1~200），需要考虑：
     - 边界值：0, 1, 200, 201
     - 三角形构成条件的边界：两边之和等于第三边（临界情况）

4. **判定表方法**：
   - 条件：A=B, A=C, B=C, A+B>C, A+C>B, B+C>A
   - 动作：等边三角形、等腰三角形、一般三角形、非三角形
   - 可以生成完整的判定表，每一列是一个测试用例

**考试注意**：
- 三角形问题是**经典例题**，很多教材都会讲解
- 注意题目表述的细微差别（"三个整数" vs "三个正整数"，"1~200之间" vs "无范围限制"）
- 必须考虑隐含的数学条件

> **来源文件**：`output_4_13_3.txt`，`output_4_14_1.txt`，`output_4_14_3.txt`

### 例题2：NextDate问题（日期计算）

**题目描述**：程序输入年、月、日三个整数，计算并输出下一天的日期。需要考虑闰年、大小月、跨月、跨年等情况。

**题目类型**：黑盒测试（边界值分析/判定表）

#### 第一步：分析输入条件

**输入条件**：
- 年（Year）：1900 ≤ Y ≤ 2100
- 月（Month）：1 ≤ M ≤ 12
- 日（Day）：1 ≤ D ≤ 31（具体上限取决于月份）

**隐含规则**：
- **闰年判断**：
  - 能被4整除但不能被100整除 → 闰年
  - 能被400整除 → 闰年
  - 其他情况 → 平年
- **月份天数**：
  - 31天：1、3、5、7、8、10、12月
  - 30天：4、6、9、11月
  - 2月：闰年29天，平年28天

#### 第二步：等价类划分

| 输入条件 | 有效等价类 (编号) | 无效等价类 (编号) |
| :--- | :--- | :--- |
| **年份** | 1900-2100之间 (1) | < 1900 (2) <br> > 2100 (3) |
| **月份** | 1-12之间 (4) | < 1 (5) <br> > 12 (6) |
| **日期** | 1-28 (7) <br> 29 (8) <br> 30 (9) <br> 31 (10) | < 1 (11) <br> > 31 (12) |
| **特殊月份** | 2月 (13) <br> 小月(4,6,9,11) (14) <br> 大月(1,3,5,7,8,10,12) (15) | - |
| **闰年** | 闰年 (16) <br> 平年 (17) | - |

#### 第三步：边界值分析（重点）

**边界值测试点**（5点法）：

1. **年份边界**：
   - 1899（无效）
   - 1900（有效最小值）
   - 2000（正常值）
   - 2100（有效最大值）
   - 2101（无效）

2. **月份边界**：
   - 0（无效）
   - 1（有效最小值）
   - 6（正常值）
   - 12（有效最大值）
   - 13（无效）

3. **日期边界**（关键）：
   - **月末边界**：
     - 1月31日 → 2月1日（跨月）
     - 2月28日（平年）→ 3月1日（跨月）
     - 2月29日（闰年）→ 3月1日（跨月）
     - 4月30日 → 5月1日（跨月）
     - 12月31日 → 1月1日（跨年）
   - **月初边界**：
     - 每月1日 → 每月2日（不跨月）

4. **闰年边界**：
   - 2000年2月29日 → 3月1日（能被400整除，闰年）
   - 2004年2月29日 → 3月1日（能被4整除，不能被100整除，闰年）
   - 2001年2月28日 → 3月1日（平年）

#### 第四步：设计测试用例

| 用例ID | 输入 (年, 月, 日) | 预期输出 | 覆盖的等价类/边界值 |
| :--- | :--- | :--- | :--- |
| TC1 | 2000, 1, 15 | 2000, 1, 16 | 正常值 |
| TC2 | 2000, 1, 31 | 2000, 2, 1 | 大月月末，跨月 |
| TC3 | 2000, 4, 30 | 2000, 5, 1 | 小月月末，跨月 |
| TC4 | 2000, 2, 29 | 2000, 3, 1 | 闰年2月月末，跨月 |
| TC5 | 2001, 2, 28 | 2001, 3, 1 | 平年2月月末，跨月 |
| TC6 | 2000, 12, 31 | 2001, 1, 1 | 年末，跨年 |
| TC7 | 2000, 2, 1 | 2000, 2, 2 | 月初，不跨月 |
| TC8 | 1899, 6, 15 | 输入错误 | 年份无效 (2) |
| TC9 | 2101, 6, 15 | 输入错误 | 年份无效 (3) |
| TC10 | 2000, 0, 15 | 输入错误 | 月份无效 (5) |
| TC11 | 2000, 13, 15 | 输入错误 | 月份无效 (6) |
| TC12 | 2000, 4, 31 | 输入错误 | 日期无效（4月只有30天） |

#### 第五步：判定表方法（可选，用于复杂逻辑）

如果题目要求用判定表，可以这样设计：

**条件**：
- C1: 是否月末？
- C2: 是否年末？
- C3: 是否2月？
- C4: 是否闰年？
- C5: 是否大月（31天）？

**动作**：
- A1: 日期+1，月不变，年不变
- A2: 日期=1，月+1，年不变
- A3: 日期=1，月=1，年+1

**判定表**（简化版）：

| 条件桩 | 规则1 | 规则2 | 规则3 | 规则4 |
| :--- | :--- | :--- | :--- | :--- |
| C1: 月末? | Y | Y | Y | N |
| C2: 年末? | Y | N | N | - |
| C3: 2月? | - | Y | N | - |
| C4: 闰年? | - | Y | - | - |
| **动作桩** | | | | |
| A1: 日期+1 | | | | √ |
| A2: 月+1 | | √ | √ | |
| A3: 年+1 | √ | | | |

**说明**：判定表的每一列就是一个测试用例。

**考试注意**：
- NextDate问题是**经典边界值测试题**
- 重点考察**月末、年末、闰年**的边界处理
- 如果题目给出具体范围（如1900-2100），必须测试边界值
- 注意区分**有效边界**和**无效边界**

### 例题3：ATM机/自动售货机问题

**题目描述**：自动售货机处理单价 **1元5角** 的饮料。
- **输入**：
  - C1: 投入1元5角硬币
  - C2: 投入2元硬币
  - C3: 按下"可乐"按钮
  - C4: 按下"雪碧"按钮
- **输出**：
  - A1: 送出饮料
  - A2: 退还5角
- **约束**：一次只能投一种币，一次只能按一个按钮。

**题目类型**：因果图/判定表

#### 第一步：识别原因和结果

**原因（Cause）** - 输入条件：
- C1: 投入1元5角硬币
- C2: 投入2元硬币
- C3: 按下"可乐"按钮
- C4: 按下"雪碧"按钮

**结果（Effect）** - 输出动作：
- A1: 送出饮料
- A2: 退还5角

#### 第二步：分析约束关系

**原因之间的约束**：
- C1 和 C2：**E (互斥)** - 一次只能投一种币
- C3 和 C4：**E (互斥)** - 一次只能按一个按钮

**结果之间的约束**：
- 无特殊约束

#### 第三步：画因果图（简化版）

```
C1 (投1.5元) ──┐
               ├── AND ──> A1 (出饮料)
C3 (按可乐) ───┘

C1 (投1.5元) ──┐
               ├── AND ──> A1 (出饮料)
C4 (按雪碧) ───┘

C2 (投2元) ────┐
               ├── AND ──> A1 (出饮料)
C3 (按可乐) ───┘          A2 (退5角)

C2 (投2元) ────┐
               ├── AND ──> A1 (出饮料)
C4 (按雪碧) ───┘          A2 (退5角)
```

**约束标注**：
- C1 E C2（互斥）
- C3 E C4（互斥）

#### 第四步：生成判定表

**初始判定表**（4个条件，2⁴ = 16种组合，但考虑约束后简化）：

| 条件桩 / 动作桩 | 规则1 | 规则2 | 规则3 | 规则4 | 规则5 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **条件** | | | | | |
| C1 (投1.5元) | 1 | 1 | 0 | 0 | 0 |
| C2 (投2元) | 0 | 0 | 1 | 1 | 0 |
| C3 (按可乐) | 1 | 0 | 1 | 0 | 0 |
| C4 (按雪碧) | 0 | 1 | 0 | 1 | 0 |
| **动作** | | | | | |
| A1 (出饮料) | √ | √ | √ | √ | |
| A2 (退5角) | | | √ | √ | |

**说明**：
- **规则1**：投1.5元 + 按可乐 → 出饮料，不找零
- **规则2**：投1.5元 + 按雪碧 → 出饮料，不找零
- **规则3**：投2元 + 按可乐 → 出饮料 **且** 退5角（**考点**：容易漏填A2）
- **规则4**：投2元 + 按雪碧 → 出饮料 **且** 退5角
- **规则5**：没投币或没按按钮 → 无动作

**简化说明**：
- 由于约束（C1和C2互斥，C3和C4互斥），不可能的组合已被剔除
- 规则5代表所有"未投币"或"未按按钮"的情况

#### 第五步：设计测试用例

根据判定表的每一列，生成测试用例：

| 用例ID | 输入 | 预期输出 | 覆盖规则 |
| :--- | :--- | :--- | :--- |
| TC1 | 投1.5元，按可乐 | 出饮料，不退零 | 规则1 |
| TC2 | 投1.5元，按雪碧 | 出饮料，不退零 | 规则2 |
| TC3 | 投2元，按可乐 | 出饮料，退5角 | 规则3 |
| TC4 | 投2元，按雪碧 | 出饮料，退5角 | 规则4 |
| TC5 | 未投币或未按按钮 | 无动作 | 规则5 |

#### 考试注意点

1. **约束符号**：
   - 选择题可能考因果图符号的含义
   - C1和C2之间是 **E (互斥)**
   - C3和C4之间是 **E (互斥)**

2. **判定表填空**：
   - 动作列不能漏填（特别是A2找零）
   - 规则3和规则4的A2必须填√

3. **测试用例格式**：
   - 必须包含：用例ID、输入、预期输出
   - 判定表的每一列就是一个测试用例

4. **常见错误**：
   - 忘记标注约束关系
   - 漏填找零动作（A2）
   - 没有考虑"未投币"的情况

> **来源文件**：`output_4_14_3.txt`

---
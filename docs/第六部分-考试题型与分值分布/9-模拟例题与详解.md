# 模拟例题与详解

> **考试定位**：根据老师提到的"新题型风格"（填空化、客观化）设计的模拟题  
> **核心策略**：掌握"挖空填表"和"计算指标"类题型的解题套路

---

## 📋 题型说明

根据录音中老师反复强调的"新题型风格"：

- **以前**：给你一张白纸，让你写设计过程，写得沾边就给辛苦分
- **现在**：**"挖空填空"式的大题**
  - 题目会画好表格或图的大致框架，挖出很多空让你填
  - **客观性极强，错了就是错了，没有辛苦分！**

**应对策略**：
- 计算圈复杂度 `V(G)` 时，一定要用三个公式互相验算
- 等价类划分时，无效类要细分，不能笼统
- 判定表填表时，逻辑要清晰，不能漏填

---

## 一、黑盒测试：三角形问题（等价类划分法）

### 题目背景

程序输入三个整数 $a, b, c$ 作为三角形的三条边，取值范围是 $[1, 100]$。程序需判断是等边、等腰、普通三角形，还是构不成三角形。

### 【模拟考题 · 填空型】

请根据上述规格说明，补全下表中的**无效等价类**及**测试用例覆盖**情况。

#### (1) 等价类划分表（请补全空缺项）

| 输入条件 | 有效等价类 (编号) | 无效等价类 (编号) |
| :--- | :--- | :--- |
| **边长范围** (a,b,c) | [1, 100] (1) | **< 1 (2)** <br> **> 100 (3)** |
| **构成三角形** | $a < b+c$ 且 $b < a+c$ 且 $c < a+b$ (4) | $a \ge b+c$ (5) <br> $b \ge a+c$ (6) <br> **$c \ge a+b$ (7)** |
| **特殊形状** | $a=b=c$ (8 等边) <br> $a=b \ne c$ 或 $a=c \ne b$ 或 $b=c \ne a$ (9 等腰) <br> $a \ne b \ne c$ (10 普通) | - |

#### (2) 测试用例设计（重点考察覆盖原则）

请为下表中的测试用例填写预期的输出，并指出其覆盖的等价类编号。

| 用例ID | 输入 (a, b, c) | 预期输出 | 覆盖的等价类编号 |
| :--- | :--- | :--- | :--- |
| TC1 | 3, 4, 5 | 普通三角形 | 1, 4, 10 |
| TC2 | 50, 50, 50 | **等边三角形** | 1, 4, 8 |
| TC3 | 3, 3, 4 | 等腰三角形 | 1, 4, 9 |
| TC4 | 0, 5, 5 | **非三角形（或输入非法）** | **2** |
| TC5 | 101, 5, 5 | **非三角形（或输入非法）** | **3** |
| TC6 | 1, 2, 8 | **非三角形** | **7**（$c \ge a+b$，即 $8 \ge 1+2$） |

### 【老师强调的解题要点】

#### 1. 无效等价类要细分

- **范围是 $[1, 100]$**，无效的一定是两个：$<1$ 和 $>100$
- 很多同学只写"不在范围内"，这会扣分
- **必须拆分为两个独立的无效等价类**

#### 2. 隐含条件

- 不仅要看输入的数字范围，还要看三角形的几何定义（两边之和大于第三边）
- 表中的 (5)(6)(7) 就是基于几何逻辑的无效类
- 注意：$a \ge b+c$、$b \ge a+c$、$c \ge a+b$ 是三个不同的无效类

#### 3. 覆盖原则（死死记住）

**有效类**：
- 一条用例尽可能多覆盖（比如 TC1 覆盖了 1, 4, 10）
- 目的是提高测试效率

**无效类**：
- **一条用例只能覆盖一个无效类**
- **错误示范**：输入 `0, 0, 0`
  - 这同时触发了三个无效条件（三个边都 < 1）
  - 程序可能在第一个 `0` 就报错退出了，导致后面没测到
- **正确做法**：像 TC4 那样，`0`（无效）搭配 `5, 5`（有效），只测这一个错误点

#### 4. 采分点

- ✅ 等价类编号正确
- ✅ 无效类细分（不能笼统）
- ✅ 测试用例覆盖原则正确（有效类多覆盖，无效类一次一个）
- ❌ 如果 TC4 写成 `0, 0, 0`，会扣分（违反了覆盖原则）

---

## 二、黑盒测试：自动售货机（因果图/判定表法）

### 题目背景

售货机处理单价 **1元5角** 的饮料。

**输入**：
- $C_1$: 投入1元5角硬币
- $C_2$: 投入2元硬币
- $C_3$: 按下"可乐"按钮
- $C_4$: 按下"雪碧"按钮

**输出**：
- $A_1$: 送出饮料
- $A_2$: 退还5角

**约束**：
- 一次只能投一种币（$C_1$ 和 $C_2$ 互斥）
- 一次只能按一个按钮（$C_3$ 和 $C_4$ 互斥）

### 【模拟考题 · 读表分析型】

根据上述逻辑，判定表如下（`1`代表发生/真，`0`代表不发生/假）。请填充表中的空缺值。

| 条件桩 / 动作桩 | 规则1 | 规则2 | 规则3 | 规则4 | 规则5 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **条件** | | | | | |
| C1 (投1.5元) | 1 | 1 | 0 | 0 | 0 |
| C2 (投2元) | 0 | 0 | 1 | 1 | 0 |
| C3 (按可乐) | 1 | 0 | 1 | 0 | 0 |
| C4 (按雪碧) | 0 | 1 | 0 | 1 | 0 |
| **动作** | | | | | |
| A1 (出饮料) | **1** | **1** | **1** | **1** | 0 |
| A2 (退5角) | 0 | 0 | **1** | **1** | 0 |

### 【详细解答】

#### 逻辑推导

**规则1**：投1.5元 + 按可乐
- 投入金额 = 1.5元，正好等于饮料价格
- 动作：出饮料 (A1=1)，不找零 (A2=0)

**规则2**：投1.5元 + 按雪碧
- 投入金额 = 1.5元，正好等于饮料价格
- 动作：出饮料 (A1=1)，不找零 (A2=0)

**规则3**（**考点**）：投2元 + 按可乐
- 投入金额 = 2元，大于饮料价格 1.5元
- 动作：出饮料 (A1=1) **且** 退5角 (A2=1)
- **填表时很容易漏填 A2，这是扣分点！**

**规则4**：投2元 + 按雪碧
- 投入金额 = 2元，大于饮料价格 1.5元
- 动作：出饮料 (A1=1) **且** 退5角 (A2=1)

**规则5**：没投币或没按按钮
- 条件：C1=0, C2=0, C3=0, C4=0
- 动作：啥也不干 (A1=0, A2=0)

### 【老师强调的解题要点】

#### 1. 约束符号

如果在选择题中考到因果图符号，记住：
- $C_1$ 和 $C_2$ 之间的关系是 **E (互斥)**，即不能同时投入
- $C_3$ 和 $C_4$ 之间的关系是 **E (互斥)**，即不能同时按下

#### 2. 判定表与用例

老师反复强调："判定表的**每一列**就是一个测试用例"

如果题目让你写出用例，直接把规则1翻译成：
- **用例1**：
  - 输入：投1.5元，按可乐
  - 预期输出：出饮料，不退零钱

#### 3. 采分点

- ✅ 判定表逻辑正确
- ✅ 动作列不能漏填（特别是 A2）
- ✅ 约束条件要体现（互斥关系）
- ❌ 如果规则3的 A2 填成 0，会扣分

---

## 三、白盒测试：基本路径测试法（必考大题）

### 题目背景

给定如下 C 语言代码片段：

```c
void func(int A, int B, int X) {
    // 节点 1 (开始)
    if (A > 10 && B == 0) {  // 注意：复合条件
        // 节点 2 (语句)
        X = X / A;
    }
    // 节点 3 (判定)
    if (A == 2 || X > 1) {   // 注意：复合条件
         // 节点 4 (语句)
        X = X + 1;
    }
    // 节点 5 (结束)
    printf("%d", X);
}
```

### 【模拟考题 · 计算与画图】

1. **画出控制流图**（注意复合条件的拆分）
2. 计算**圈复杂度 V(G)**
3. 列出**独立路径**

### 【详细解答与采分点】

#### 1. 画控制流图（关键采分点）

**老师强调：复合条件必须拆分！**

**第一个 `if (A > 10 && B == 0)`**：
- 这是逻辑 **与 (AND)**
- 先判 `A > 10`？
  - 如果是 **假 (F)**，直接跳出该IF（短路），去节点4
  - 如果是 **真 (T)**，再判 `B == 0`
    - 如果 `B == 0` 为真，执行 `X = X / A`
    - 如果 `B == 0` 为假，去节点4

**第二个 `if (A == 2 || X > 1)`**：
- 这是逻辑 **或 (OR)**
- 先判 `A == 2`？
  - 如果是 **真 (T)**，直接进执行语句（短路），执行 `X = X + 1`
  - 如果是 **假 (F)**，再判 `X > 1`
    - 如果 `X > 1` 为真，执行 `X = X + 1`
    - 如果 `X > 1` 为假，直接结束

**控制流图结构**（用圆圈表示节点，箭头表示边）：

```
节点①: A > 10? 
  ├─ T → 节点②: B == 0?
  │         ├─ T → 节点③: X = X / A → 节点④
  │         └─ F → 节点④
  └─ F → 节点④: A == 2?
              ├─ T → 节点⑤: X = X + 1 → 节点⑥
              └─ F → 节点⑦: X > 1?
                        ├─ T → 节点⑤ → 节点⑥
                        └─ F → 节点⑥
节点⑥: printf (结束)
```

**注意**：
- 节点④是第一个IF结束后的**汇聚节点**，必须画出来
- 节点⑤是第二个IF的执行语句
- 节点⑥是结束节点

#### 2. 计算圈复杂度 V(G)

**使用公式：V(G) = 判定节点数 + 1**

判定节点有：
1. `A > 10`（节点①）
2. `B == 0`（节点②）
3. `A == 2`（节点④）
4. `X > 1`（节点⑦）

共 **4个判定节点**。

**V(G) = 4 + 1 = 5**

**⚠️ 警告**：
- 如果你没拆分复合条件，只当成2个IF，你会算出 V(G) = 2 + 1 = 3
- **这题就全错了！**
- 必须用三个公式验算：
  - 公式1：V(G) = 区域数 = 5
  - 公式2：V(G) = E - N + 2（需要数边和节点）
  - 公式3：V(G) = P + 1 = 4 + 1 = 5

#### 3. 列出独立路径

需要列出 **5条路径**（必须覆盖所有边）：

**路径1**（全错短路）：
- ①(F) → ④(A!=2) → ⑦(X<=1) → ⑥
- 测试用例：A=5, B=1, X=0

**路径2**（第一个IF全部生效）：
- ①(T) → ②(T) → ③ → ④(A!=2) → ⑦(X<=1) → ⑥
- 测试用例：A=15, B=0, X=1（执行除法后 X=0）

**路径3**（第一个IF半途而废）：
- ①(T) → ②(F) → ④(A!=2) → ⑦(X>1) → ⑤ → ⑥
- 测试用例：A=15, B=1, X=2

**路径4**（第二个IF第一个条件中）：
- ①(F) → ④(A==2) → ⑤ → ⑥
- 测试用例：A=2, B=1, X=0

**路径5**（第二个IF第二个条件中）：
- ①(F) → ④(A!=2) → ⑦(X>1) → ⑤ → ⑥
- 测试用例：A=5, B=1, X=2

**注意**：
- 每条路径必须包含至少一条之前路径没有走过的边
- 路径可以用节点编号表示，如：1→4→7→6

### 【老师强调的解题要点】

#### 1. 复合条件拆分（生死攸关）

- 看到 `&&` 或 `||`，画控制流图时**必须拆成两个节点**
- 这是最关键的采分点，如果没拆分，后面全错

#### 2. 汇聚节点

- IF 语句结束后的汇合点，必须画出来
- 节点④就是汇聚节点

#### 3. 圈复杂度验算

- 算完后，用 $V(G) = 区域数$ 验算一遍
- 用 $V(G) = E - N + 2$ 再验算一遍
- 三个公式结果必须一致

#### 4. 采分点

- ✅ 控制流图正确（复合条件拆分、汇聚节点）
- ✅ 圈复杂度计算正确（V(G) = 5）
- ✅ 独立路径数量正确（5条）
- ✅ 每条路径包含新边
- ❌ 如果圈复杂度算错，后面全扣分

---

## 总结：拿分策略

### 1. 黑盒题（等价类划分）

- 看到"等价类"就画表
- 看到"无效类"就记得**控制变量**（一次只测一个错）
- 无效类要细分，不能笼统

### 2. 黑盒题（因果图/判定表）

- 看到"判定表"要敢于填 `0/1`
- 逻辑通常很简单，不要想复杂
- 动作列不能漏填（特别是找零、退款等）

### 3. 白盒题（基本路径测试 - 生死攸关）

- 看到 `&&` 或 `||`，画控制流图时**必须拆成两个节点**
- 圈复杂度算完后，用 $V(G) = 区域数$ 验算一遍
- 只要圈复杂度是对的，路径稍微写乱一点，老师可能会给辛苦分
- **但如果圈复杂度数错了，后面全扣**

### 4. 通用策略

- **填空题**：客观性极强，错了就是错了，没有辛苦分
- **计算题**：一定要用多个公式验算
- **画图题**：注意细节（复合条件拆分、汇聚节点）
- **填表题**：逻辑要清晰，不能漏填

---

## 📝 考前提醒

1. **等价类划分**：无效类要细分，覆盖原则要记牢
2. **判定表**：每一列就是一个用例，动作不能漏
3. **基本路径测试**：复合条件必须拆分，圈复杂度要验算
4. **客观题**：没有辛苦分，必须准确无误

**建议**：考前最后一天，把这三个例题的解题流程再过一遍，确保每个步骤都清晰！

